---
title: FaaSを駆使していろいろ作って、運動モチベをあげようとした話
tags:
  - AWS
  - 社内勉強会
  - lambda
  - サーバーレス
private: true
updated_at: '2020-06-17T11:31:10+09:00'
id: 423f2bc1124da04d6c33
organization_url_name: null
---
## お品書き

- FaaSって何?
    - FaaSについて
    - FaaSのユースケース
    - ブライズ内での使用ケース
- 土日に個人で作ってみたよ
- まとめ

---

## FaaSって何？

FaaS = サーバーレスを実現するクラウドサービスの一つ

---

## サーバーレスって何？
- ~~サーバー不要で動くアプリケーション~~
- マネージドサービスを介して動くアプリケーション
    - リソース確保の柔軟性
    - サーバー管理は(ほぼ)不要

---

### FaaS(Function as a Service)について

- 機能(関数)を実行する環境を用意してくれている。
    - AWS Lambda
    - GCP Cloud Functions
    - Azure Functions
    - Google App Script
- 開発者はロジックに専念することができる
- 言語の縛りがほぼない

---

### FaaSのユースケース

- なにかしらのイベントをトリガーにして関数を実行させる。
    - APIとして提供し、URLを叩かれたら関数を実行する
        - BotのコールバックAPI
        - バックエンドAPI
    - クラウドサービス上のアクションをトリガーにする
        - S3へファイルがアップロードされた際
        - Cloud Watchでエラーを吐いたら

---

### ブライズ内での使用ケース

- 画像のリサイズAPI
    - 特定URLが叩かれたらLambdaで画像をリサイズして返す。
- LINEメッセージをs3に格納する
    - ユーザーからのLINEをトリガーに実行

他にもいくつか動いてるよ！

---

## 個人で色々作ってみたよ

- 最近、リングフィットとFitBoxingを買って運動意欲が高いので、それらのモチベ維持になんか作れないかなと作りました。
- 土日(計4~5h)くらいしか時間割けなかったので、作り込み甘い部分は許してクレメンス

---

## 事例① 画像からテキスト抽出してDBに保存する

- Switchにはゲーム画面を撮影して、Twitter等に投稿する機能がある。

![ringfit.jpeg](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/166596/5dd12115-3648-d488-92fc-ca86d96be5f5.jpeg)

![fitboxing.jpeg](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/166596/2093f0ab-efba-f7c4-fdf2-8c218c0bc9db.jpeg)

- 投稿した画像に表示されている消費カロリーを抽出し、DBに貯めたい
- フローは下記
![スクリーンショット 2020-06-15 15.44.22.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/166596/616b9891-5b77-6831-6236-85808c44187b.png)

- ~~本当はTwitterの投稿をトリガーにしたかったが、時間的に諦めた~~

---

## 事例② その日の運動データをLINE Botが教えてくれるようにする。

- "お願いマッスル"をトリガーワードに、その日のそれぞれのゲームの消費カロリーを教えてくれるBot
- フローは下記
![スクリーンショット 2020-06-15 15.44.31.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/166596/e5c49f3a-0a55-fb50-79ec-99608d6ce19b.png)

---

##　まとめ

- FaaSを利用することで、開発者はロジックに専念してサービスを提供することができる。
- FaaSはイベントをトリガーにして関数が実行される
- イベントが発火した(関数が実行された)分だけの課金になるので、比較的安価に利用が可能

---

## おまけ

### 今回作ったものをもしブライズで何かしら活用できるとしたら、、、

- 事例①
    - ユーザーが見積書を投稿すると、その情報から見積額、それぞれの金額などを自動入力する機能
    - 花嫁笑顔グランプリ
- 事例②
    - 式場PICKUP以外の新たなBotの活用
- 他
    - 画像がアップロードされたら、サムネイル画像を作成する
    - ぺら一枚の簡単LP作成
        - JAMStackのバックエンド側としての利用も可能
        - Symfony1.4から離れて、いろんな言語、フロントフレームワークでの開発も不可能ではない
